import{Z as E,u as S,r as a,a as t,b as n,s as o,j as e,i as y,a1 as b}from"./index.js";import{u as D,S as v}from"./StatusBarComponent.js";function R(){const{emailEncoded:w,confirmationCode:p}=E(),m=w.replace(/%40/g,"@"),s=D(),{passwordLoading:h,passwordSuccessMessage:i,passwordErrorMessage:c,passwordStatusCode:d}=S(r=>r.password),[l,x]=a.useState(""),[u,j]=a.useState("");a.useEffect(()=>{s(t("Please enter your desired password in both fields.")),s(n(Date.now()))},[]),a.useEffect(()=>{h&&s(n(Date.now()))},[h]),a.useEffect(()=>{i&&(s(t(i)),s(o("success")),s(n(Date.now())))},[i]),a.useEffect(()=>{c&&(s(t(c)),s(o("error")),s(n(Date.now())))},[c]),a.useEffect(()=>{d==200&&(s(n(Date.now())),setTimeout(()=>{window.location.href="/login"},5e3))},[d]),a.useEffect(()=>{d==403&&(s(n(Date.now())),setTimeout(()=>{window.location.href="/forgot"},5e3))},[d]);const g=r=>{try{r.target.name=="password"&&y(r.target.value)&&(x(r.target.value),s(t("The password entered is valid.")),s(o("success")))}catch(f){s(t(f.message)),s(o("error"))}},C=r=>{try{if(r.target.name=="confirm-password"&&r.target.value==l)j(r.target.value),s(t("The passwords match.")),s(o("success"));else throw new Error("The passwords do not match.")}catch(f){s(t(f.message)),s(o("error"))}},P=r=>{r.preventDefault(),l!==""&&u!==""&&(s(t("Standby for confirmation of password change.")),s(o("info")),s(b({email:m,confirmationCode:p,password:l,confirmPassword:u})))};return e.jsx(e.Fragment,{children:e.jsx("section",{children:e.jsx("main",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:g,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:C,required:!0})})})]}),e.jsxs("tfoot",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:P,id:"confirm_password_btn",children:e.jsx("h3",{children:"CONFIRM"})})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx(v,{})})})]})]})})})})})}export{R as default};
//# sourceMappingURL=PasswordRecovery.js.map
