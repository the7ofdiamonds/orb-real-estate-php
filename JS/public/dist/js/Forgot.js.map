{"version":3,"file":"Forgot.js","sources":["../../src/views/components/ForgotComponent.jsx","../../src/views/Forgot.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { sendForgotPasswordEmail } from '../../controllers/passwordSlice';\nimport {\n  setMessage,\n  setMessageType,\n  setShowStatusBar,\n} from '../../controllers/messageSlice';\n\nimport { isValidEmail } from '../../../../utils/Validation';\n\nimport StatusBarComponent from '../../../../components/StatusBarComponent';\n\nfunction ForgotComponent() {\n  const dispatch = useDispatch();\n\n  const [email, setEmail] = useState('');\n\n  const {\n    passwordLoading,\n    passwordSuccessMessage,\n    passwordErrorMessage,\n    passwordStatusCode,\n  } = useSelector((state) => state.password);\n\n  useEffect(() => {\n    dispatch(\n      setMessage('If you forgot your password, enter your username or email.')\n    );\n    dispatch(setShowStatusBar(Date.now()));\n  }, []);\n\n  useEffect(() => {\n    if (passwordLoading) {\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  }, [passwordLoading]);\n\n  useEffect(() => {\n    if (passwordSuccessMessage) {\n      const urlParams = new URLSearchParams(window.location.search);\n      const redirectTo = urlParams.get('redirectTo');\n\n      setTimeout(() => {\n        if (redirectTo === null) {\n          window.location.href = '/login';\n        } else {\n          window.location.href = redirectTo;\n        }\n      }, 5000);\n\n      dispatch(setMessageType('success'));\n      dispatch(setMessage(passwordSuccessMessage));\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  }, [dispatch, passwordSuccessMessage]);\n\n  useEffect(() => {\n    if (passwordErrorMessage && passwordStatusCode != 403) {\n      dispatch(setMessageType('error'));\n      dispatch(setMessage(passwordErrorMessage));\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  }, [dispatch, passwordErrorMessage]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      if (isValidEmail(email)) {\n        dispatch(setMessageType('info'));\n        dispatch(\n          setMessage(\n            'Standbye while an attempt to help get access to your account is made.'\n          )\n        );\n        dispatch(sendForgotPasswordEmail(email));\n      }\n    } catch (error) {\n      dispatch(setMessageType('error'));\n      dispatch(setMessage(error.message));\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === 'email') {\n      setEmail(e.target.value);\n    }\n  };\n\n  return (\n    <>\n      <form className='forgot-form'>\n        <div className=\"forgot-card card\">\n          <input\n            className=\"input-email\"\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            onChange={handleChange}\n            required\n          />\n        </div>\n\n        <button type=\"submit\" onClick={handleSubmit}>\n          <h3>RESET</h3>\n        </button>\n      </form>\n\n      <StatusBarComponent />\n    </>\n  );\n}\n\nexport default ForgotComponent;\n","import NavigationLoginComponent from './components/NavigationLoginComponent';\nimport ForgotComponent from './components/ForgotComponent';\n\nfunction Forgot() {\n  let page = 'forgot';\n\n  return (\n    <>\n      <main className=\"forgot\">\n        <NavigationLoginComponent page={page} />\n        <ForgotComponent />\n      </main>\n    </>\n  );\n}\n\nexport default Forgot;\n"],"names":["ForgotComponent","dispatch","useDispatch","email","setEmail","useState","passwordLoading","passwordSuccessMessage","passwordErrorMessage","passwordStatusCode","useSelector","state","password","useEffect","setMessage","setShowStatusBar","Date","now","redirectTo","URLSearchParams","window","location","search","get","setTimeout","href","setMessageType","handleSubmit","e","preventDefault","isValidEmail","sendForgotPasswordEmail","error","message","handleChange","target","name","value","jsxs","Fragment","children","className","jsx","type","placeholder","onChange","required","onClick","StatusBarComponent","Forgot","page","NavigationLoginComponent"],"mappings":"gLAcA,SAASA,GAAkB,CACzB,MAAMC,EAAWC,IAEX,CAACC,EAAOC,CAAQ,EAAIC,WAAS,EAAE,EAE/B,CACJC,gBAAAA,EACAC,uBAAAA,EACAC,qBAAAA,EACAC,mBAAAA,CACE,EAAAC,EAAaC,GAAUA,EAAMC,QAAQ,EAEzCC,EAAAA,UAAU,IAAM,CACdZ,EACEa,EAAW,4DAA4D,CACzE,EACAb,EAASc,EAAiBC,KAAKC,IAAI,CAAC,CAAC,CACvC,EAAG,CAAE,CAAA,EAELJ,EAAAA,UAAU,IAAM,CACVP,GACFL,EAASc,EAAiBC,KAAKC,IAAI,CAAC,CAAC,CAEzC,EAAG,CAACX,CAAe,CAAC,EAEpBO,EAAAA,UAAU,IAAM,CACd,GAAIN,EAAwB,CAEpB,MAAAW,EADY,IAAIC,gBAAgBC,OAAOC,SAASC,MAAM,EAC/BC,IAAI,YAAY,EAE7CC,WAAW,IAAM,CACXN,IAAe,KACjBE,OAAOC,SAASI,KAAO,SAEvBL,OAAOC,SAASI,KAAOP,GAExB,GAAI,EAEEjB,EAAAyB,EAAe,SAAS,CAAC,EACzBzB,EAAAa,EAAWP,CAAsB,CAAC,EAC3CN,EAASc,EAAiBC,KAAKC,IAAI,CAAC,CAAC,CACvC,CACF,EAAG,CAAChB,EAAUM,CAAsB,CAAC,EAErCM,EAAAA,UAAU,IAAM,CACVL,GAAwBC,GAAsB,MACvCR,EAAAyB,EAAe,OAAO,CAAC,EACvBzB,EAAAa,EAAWN,CAAoB,CAAC,EACzCP,EAASc,EAAiBC,KAAKC,IAAI,CAAC,CAAC,EAEzC,EAAG,CAAChB,EAAUO,CAAoB,CAAC,EAE7B,MAAAmB,EAAe,MAAOC,GAAM,CAChCA,EAAEC,eAAe,EAEb,GAAA,CACEC,EAAa3B,CAAK,IACXF,EAAAyB,EAAe,MAAM,CAAC,EAC/BzB,EACEa,EACE,uEACF,CACF,EACSb,EAAA8B,EAAwB5B,CAAK,CAAC,SAElC6B,EAAO,CACL/B,EAAAyB,EAAe,OAAO,CAAC,EACvBzB,EAAAa,EAAWkB,EAAMC,OAAO,CAAC,EAClChC,EAASc,EAAiBC,KAAKC,IAAI,CAAC,CAAC,CACvC,GAGIiB,EAAgBN,GAAM,CACtBA,EAAEO,OAAOC,OAAS,SACXhC,EAAAwB,EAAEO,OAAOE,KAAK,GAI3B,OAEIC,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAA,CAACF,EAAA,KAAA,OAAA,CAAKG,UAAU,cACdD,SAAA,CAACE,EAAA,IAAA,MAAA,CAAID,UAAU,mBACbD,SAAAE,EAAA,IAAC,QAAA,CACCD,UAAU,cACVE,KAAK,QACLP,KAAK,QACLQ,YAAY,QACZC,SAAUX,EACVY,SAAQ,GACV,CACF,CAAA,EAEAJ,EAAA,IAAC,UAAOC,KAAK,SAASI,QAASpB,EAC7Ba,SAAAE,EAAA,IAAC,KAAG,CAAAF,SAAA,QAAK,CACX,CAAA,CAAA,CACF,CAAA,QAECQ,EAAmB,CAAA,CAAA,CAAA,CACtB,CAAA,CAEJ,CC/GA,SAASC,GAAS,CAChB,IAAIC,EAAO,SAEX,OAEIR,EAAAA,IAAAH,EAAAA,SAAA,CAAAC,SAAAF,EAAA,KAAC,OAAK,CAAAG,UAAU,SACdD,SAAA,CAAAE,EAAA,IAACS,GAAyBD,KAAAA,CAAY,CAAA,QACrClD,EAAgB,CAAA,CAAA,CAAA,EACnB,CACF,CAAA,CAEJ"}