{"version":3,"file":"Signup.js","sources":["../../src/views/Signup.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { getLocation } from '../../../utils/Location';\n\nimport NavigationLoginComponent from './components/NavigationLoginComponent';\n\nimport StatusBarComponent from '../../../components/StatusBarComponent';\n\nimport {\n  setMessage,\n  setMessageType,\n  setShowStatusBar,\n} from '../controllers/messageSlice';\nimport { signup } from '../controllers/signupSlice';\nimport {\n  updateAccessToken,\n  updateRefreshToken,\n} from '../controllers/loginSlice';\n\nimport {\n  isValidEmail,\n  isValidName,\n  isValidPassword,\n  isValidUsername,\n  isValidPhone,\n} from '../../../utils/Validation';\n\nfunction SignUpComponent() {\n  let page = 'signup';\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [nicename, setNicename] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [phone, setPhone] = useState('');\n\n  const dispatch = useDispatch();\n\n  const {\n    signupLoading,\n    signupStatusCode,\n    signupSuccessMessage,\n    signupErrorMessage,\n    accessToken,\n    refreshToken,\n  } = useSelector((state) => state.signup);\n\n  useEffect(() => {\n    getLocation();\n  }, []);\n\n  useEffect(() => {\n    dispatch(\n      setMessage(\n        'Enter the username, email, and password of your choice to sign up.'\n      )\n    );\n    dispatch(setShowStatusBar(Date.now()));\n  }, []);\n\n  useEffect(() => {\n    if (signupLoading) {\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  }, [signupLoading]);\n\n  useEffect(() => {\n    if (signupSuccessMessage) {\n      dispatch(setMessageType('success'));\n      dispatch(setMessage(signupSuccessMessage));\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  }, [signupSuccessMessage]);\n\n  useEffect(() => {\n    if (signupErrorMessage) {\n      dispatch(setMessageType('error'));\n      dispatch(setMessage(signupErrorMessage));\n      dispatch(setShowStatusBar(Date.now()));\n    }\n  }, [signupErrorMessage]);\n\n  useEffect(() => {\n    if (accessToken && refreshToken) {\n      dispatch(updateAccessToken(accessToken));\n      dispatch(updateRefreshToken(refreshToken));\n    }\n  }, [dispatch, accessToken, refreshToken]);\n\n  useEffect(() => {\n    if (accessToken && refreshToken && signupStatusCode == 200) {\n      const urlParams = new URLSearchParams(window.location.search);\n      const redirectTo = urlParams.get('redirectTo');\n\n      setTimeout(() => {\n        if (redirectTo == null) {\n          window.location.href = '/dashboard';\n        } else {\n          window.location.href = redirectTo;\n        }\n      }, 5000);\n    }\n  }, [dispatch, accessToken, refreshToken, signupStatusCode]);\n\n  const handleChangePassword = (e) => {\n    try {\n      if (e.target.name == 'password' && isValidPassword(e.target.value)) {\n        setPassword(e.target.value);\n        dispatch(setMessage('Password entered is valid.'));\n        dispatch(setMessageType('success'));\n      }\n    } catch (error) {\n      dispatch(setMessage(error.message));\n      dispatch(setMessageType('error'));\n    }\n  };\n\n  const handleChangeConfirmPassword = (e) => {\n    try {\n      if (e.target.name == 'confirm-password' && e.target.value == password) {\n        setConfirmPassword(e.target.value);\n        dispatch(setMessage('Passwords match.'));\n        dispatch(setMessageType('success'));\n      } else {\n        throw Error('Passwords do not match.');\n      }\n    } catch (error) {\n      dispatch(setMessage(error.message));\n      dispatch(setMessageType('error'));\n    }\n  };\n\n  const handleChange = (e) => {\n    try {\n      const { name, value } = e.target;\n\n      if (name === 'username') {\n        setUsername(value);\n\n        if (isValidUsername(value)) {\n          dispatch(setMessage('Username is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      } else if (name === 'email') {\n        setEmail(value);\n\n        if (isValidEmail(value)) {\n          dispatch(setMessage('Email is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      } else if (name === 'nicename') {\n        setNicename(value);\n\n        if (isValidName(value)) {\n          dispatch(setMessage('Nicename is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      } else if (name === 'nickname') {\n        setNickname(value);\n\n        if (isValidName(value)) {\n          dispatch(setMessage('Nickname is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      } else if (name === 'firstname') {\n        setFirstname(value);\n\n        if (isValidName(value)) {\n          dispatch(setMessage('First name is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      } else if (name === 'lastname') {\n        setLastname(value);\n\n        if (isValidName(value)) {\n          dispatch(setMessage('Last name is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      } else if (name === 'phone') {\n        setPhone(value);\n\n        if (isValidPhone(value)) {\n          dispatch(setMessage('Phone number is valid.'));\n          dispatch(setMessageType('success'));\n        }\n      }\n    } catch (error) {\n      dispatch(setMessage(error.message));\n      dispatch(setMessageType('error'));\n    }\n  };\n\n  const credentials = {\n    username: username,\n    email: email,\n    password: password,\n    confirmPassword: confirmPassword,\n    nicename: nicename,\n    nickname: nickname,\n    firstname: firstname,\n    lastname: lastname,\n    phone: phone,\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (password !== '' && confirmPassword !== '') {\n      dispatch(setMessageType('info'));\n      dispatch(setMessage('Standby signup attempt in progress.'));\n      dispatch(signup(credentials));\n    }\n  };\n\n  return (\n    <>\n      <main className='signup'>\n        <NavigationLoginComponent page={page} />\n\n        <form className=\"signup-form\">\n          <div className=\"required-card card\">\n            <input\n              className=\"input-email\"\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Email\"\n              onChange={handleChange}\n              required\n            />\n            <input\n              className=\"input-password\"\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChangePassword}\n              required\n            />\n            <input\n              className=\"input-password\"\n              type=\"password\"\n              name=\"confirm-password\"\n              placeholder=\"Confirm Password\"\n              onChange={handleChangeConfirmPassword}\n              required\n            />\n          </div>\n\n          <div className=\"optional-card card\">\n            <input\n              className=\"input-username\"\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"Username\"\n              onChange={handleChange}\n              required\n            />\n            <input\n              className=\"input-name\"\n              type=\"text\"\n              name=\"nicename\"\n              placeholder=\"Nice Name (eg. /nicename)\"\n              onChange={handleChange}\n              required\n            />\n            <input\n              className=\"input-name\"\n              type=\"text\"\n              name=\"nickname\"\n              placeholder=\"Nickname\"\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <div className=\"account-card card\">\n            <input\n              className=\"input-name\"\n              type=\"text\"\n              name=\"firstname\"\n              placeholder=\"First Name\"\n              onChange={handleChange}\n              required\n            />\n            <input\n              className=\"input-name\"\n              type=\"text\"\n              name=\"lastname\"\n              placeholder=\"Last Name\"\n              onChange={handleChange}\n              required\n            />\n\n            <input\n              className=\"input-phone\"\n              type=\"tel\"\n              name=\"phone\"\n              id=\"phone\"\n              pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\"\n              placeholder=\"123-456-7890\"\n              onChange={handleChange}\n            />\n          </div>\n\n          <button type=\"submit\" onClick={handleSubmit} id=\"signup_btn\">\n            <h3>SIGN UP</h3>\n          </button>\n        </form>\n\n        <StatusBarComponent />\n      </main>\n    </>\n  );\n}\n\nexport default SignUpComponent;\n"],"names":["SignUpComponent","page","username","setUsername","useState","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","nicename","setNicename","nickname","setNickname","firstname","setFirstname","lastname","setLastname","phone","setPhone","dispatch","useDispatch","signupLoading","signupStatusCode","signupSuccessMessage","signupErrorMessage","accessToken","refreshToken","useSelector","state","signup","useEffect","getLocation","setMessage","setShowStatusBar","Date","now","setMessageType","updateAccessToken","updateRefreshToken","redirectTo","URLSearchParams","window","location","search","get","setTimeout","href","handleChangePassword","e","target","name","isValidPassword","value","error","message","handleChangeConfirmPassword","Error","handleChange","isValidUsername","isValidEmail","isValidName","isValidPhone","credentials","handleSubmit","preventDefault","jsx","Fragment","children","jsxs","className","NavigationLoginComponent","type","placeholder","onChange","required","id","pattern","onClick","StatusBarComponent"],"mappings":"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"}